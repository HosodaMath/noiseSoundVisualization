var y=Object.defineProperty;var w=(u,e,n)=>e in u?y(u,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[e]=n;var C=(u,e,n)=>(w(u,typeof e!="symbol"?e+"":e,n),n);import{P as g}from"./vendor.6c0cdefa.js";const S=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}};S();class v{constructor(e,n){C(this,"analyzer");C(this,"data");C(this,"sketch",e=>{let n=0,i=.005;e.setup=()=>{e.createCanvas(e.windowWidth,e.windowHeight),e.pixelDensity(1),e.noStroke(),e.smooth(),e.background(e.color("#000000"))},e.draw=()=>{e.randomSeed(1),e.push(),e.translate(e.width*.5,e.height*.5);let t=e.height*.5+e.random(0,10);this.analyzer.getByteTimeDomainData(this.data),e.beginShape();const o=0,a=this.data.length;for(let r=o;r<a;r+=2){const d=this.data[r]/128*100,s=200,l=230,h=100*e.noise(r*.001,t*.001,n),m=2;for(e.fill(d,s,l),e.ellipse(r,t,m,m);e.frameCount<250;){r+=e.cos(h)*3,t+=e.sin(h)*5;break}}e.endShape(),n+=i,e.pop()},e.windowResized=()=>{e.resizeCanvas(e.windowWidth,e.windowHeight)}});this.analyzer=e,this.data=n}}const b=u=>{const e=document.createElement("button");e.className="fullScreenButton",e.textContent="fullScreen",u.appendChild(e),e.addEventListener("click",()=>{u.requestFullscreen()})},L=u=>{const e=document.createElement("div");e.className="startWindow";const n=document.createElement("h1");n.textContent="noise Sound Visualization";const i=document.createElement("p");i.textContent="\u8AB0\u304B\u306E\u30B3\u30FC\u30C9\u3092\u53C2\u7167\u3057\u305D\u308C\u3092\u5225\u306E\u3082\u306E\u306B\u66F8\u304D\u63DB\u3048\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002";const t=document.createElement("p");t.textContent="@senbaku\u3055\u3093\u306Enoise waves\u3092\u6539\u826F\u3057\u3066\u4F5C\u6210\u3057\u307E\u3057\u305F\u3002";const o=document.createElement("a");o.className="navigationLink",o.textContent="\u30AA\u30EA\u30B8\u30CA\u30EB\u30B3\u30FC\u30C9\u306F\u3053\u3053\u3067\u3059\u3002",o.href="https://openprocessing.org/sketch/1469218";const a=document.createElement("strong");a.textContent="\u30B3\u30FC\u30C9\u306E\u30E9\u30A4\u30BB\u30F3\u30B9\u306FCC BY-NC-SA 3.0\u3067\u3059\u3002",a.className="licence";const r=document.createElement("button");return r.textContent="Start!!",r.className="startButton",u.appendChild(e),e.appendChild(n),e.appendChild(i),e.appendChild(t),e.appendChild(o),e.appendChild(a),e.appendChild(r),{startWindow:e,startButton:r}},k=u=>{const e=document.createElement("div");e.className="audioController";const n=document.createElement("h3");n.textContent="Audio Controller";const i=document.createElement("button");i.textContent="Play",i.className="audioPlayButton";const t=document.createElement("button");t.textContent="Stop",t.className="audioStopButton";const o=document.createElement("button");o.textContent="+",o.className="audioGainPlusButton";const a=document.createElement("button");a.textContent="-",a.className="audioGainMinusButton",u.appendChild(e),e.appendChild(n),e.appendChild(i),e.appendChild(t),e.appendChild(o),e.appendChild(a)};var x="./assets/beat.1ed1a389.wav";const f=document.body,p=L(f);b(f);p.startButton.addEventListener("click",()=>{f.removeChild(p.startWindow),k(f);let u=!1,e,n;const i=async a=>{const c=await(await fetch(x)).arrayBuffer();return await a.decodeAudioData(c)},t=(a,r,c)=>{e=a.createBufferSource(),e.buffer=r,e.connect(n).connect(c).connect(a.destination),e.start(),u=!0};(()=>{const a=document.querySelector(".audioPlayButton");if(!(a instanceof HTMLButtonElement))throw new Error("Error");a.addEventListener("click",async()=>{const s=new AudioContext,l=s.createAnalyser();l.fftSize=2048;const h=l.frequencyBinCount,m=new Uint8Array(h);if(l.getByteTimeDomainData(m),n=s.createGain(),u===!0)return;const B=await i(s);t(s,B,l);const E=new v(l,m);new g(E.sketch)});const r=document.querySelector(".audioStopButton");if(!(r instanceof HTMLButtonElement))throw new Error("Error");r.addEventListener("click",async()=>{const s=document.querySelector("main");if(!(s instanceof HTMLElement))throw new Error("Error");f.removeChild(s),e.stop(),u=!1});const c=document.querySelector(".audioGainPlusButton");if(!(c instanceof HTMLButtonElement))throw new Error("Error");c.addEventListener("click",()=>{n.gain.value<1&&(n.gain.value+=.05)});const d=document.querySelector(".audioGainMinusButton");if(!(d instanceof HTMLButtonElement))throw new Error("Error");d.addEventListener("click",()=>{n.gain.value>.05&&(n.gain.value-=.05)})})()});
